{"ast":null,"code":"const API_URL = `${process.env.NEXT_PUBLIC_API_ROOT_URL}api/auth/`;\n\nconst myHeaders = data => {\n  return new Headers({\n    'content-type': 'application/json',\n    'content-length': data ? JSON.stringify(data).length.toString() : 0\n  });\n};\n\nconsole.log('localStorage', localStorage);\n\nclass AuthService {\n  login(data) {\n    return fetch(API_URL + \"login\", {\n      method: \"POST\",\n      headers: myHeaders(data),\n      body: JSON.stringify(data)\n    }).then(r => r.json()).then(response => {\n      if (response.data && response.data.token) {\n        localStorage.setItem(\"user\", JSON.stringify(response.data));\n      }\n\n      console.log('localStorage.l23', JSON.parse(localStorage.getItem('user')));\n      return response.data;\n    });\n  }\n\n  logout() {\n    localStorage.removeItem(\"user\");\n  }\n\n  register(data) {\n    return fetch(API_URL + \"signup\", {\n      method: \"POST\",\n      headers: myHeaders(data),\n      body: JSON.stringify(data)\n    }).then(r => {\n      return r.json();\n    });\n  }\n\n  getCurrentUser() {\n    return JSON.parse(localStorage.getItem('user'));\n    ;\n  }\n\n}\n\nexport default new AuthService();","map":{"version":3,"sources":["/Users/doria/Documents/Avem CreÌation/Codes/cicerone_app/cicerone_front/src/services/auth.service.js"],"names":["API_URL","process","env","NEXT_PUBLIC_API_ROOT_URL","myHeaders","data","Headers","JSON","stringify","length","toString","console","log","localStorage","AuthService","login","fetch","method","headers","body","then","r","json","response","token","setItem","parse","getItem","logout","removeItem","register","getCurrentUser"],"mappings":"AAAA,MAAMA,OAAO,GAAI,GAAEC,OAAO,CAACC,GAAR,CAAYC,wBAAyB,WAAxD;;AAGA,MAAMC,SAAS,GAAGC,IAAI,IAAI;AACxB,SAAO,IAAIC,OAAJ,CAAY;AACjB,oBAAgB,kBADC;AAEjB,sBAAkBD,IAAI,GAAGE,IAAI,CAACC,SAAL,CAAeH,IAAf,EAAqBI,MAArB,CAA4BC,QAA5B,EAAH,GAA4C;AAFjD,GAAZ,CAAP;AAID,CALD;;AAOAC,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BC,YAA5B;;AAEA,MAAMC,WAAN,CAAkB;AAChBC,EAAAA,KAAK,CAACV,IAAD,EAAO;AACV,WAAOW,KAAK,CAAChB,OAAO,GAAG,OAAX,EAAoB;AAC9BiB,MAAAA,MAAM,EAAE,MADsB;AAE9BC,MAAAA,OAAO,EAAEd,SAAS,CAACC,IAAD,CAFY;AAG9Bc,MAAAA,IAAI,EAAEZ,IAAI,CAACC,SAAL,CAAeH,IAAf;AAHwB,KAApB,CAAL,CAKNe,IALM,CAKDC,CAAC,IAAIA,CAAC,CAACC,IAAF,EALJ,EAMNF,IANM,CAMDG,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAAClB,IAAT,IAAiBkB,QAAQ,CAAClB,IAAT,CAAcmB,KAAnC,EAA0C;AACxCX,QAAAA,YAAY,CAACY,OAAb,CAAqB,MAArB,EAA6BlB,IAAI,CAACC,SAAL,CAAee,QAAQ,CAAClB,IAAxB,CAA7B;AACD;;AACDM,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCL,IAAI,CAACmB,KAAL,CAAWb,YAAY,CAACc,OAAb,CAAqB,MAArB,CAAX,CAAhC;AAEA,aAAOJ,QAAQ,CAAClB,IAAhB;AACD,KAbM,CAAP;AAcD;;AAEDuB,EAAAA,MAAM,GAAG;AACPf,IAAAA,YAAY,CAACgB,UAAb,CAAwB,MAAxB;AACD;;AAEDC,EAAAA,QAAQ,CAACzB,IAAD,EAAO;AACb,WAAOW,KAAK,CAAChB,OAAO,GAAG,QAAX,EAAqB;AAC/BiB,MAAAA,MAAM,EAAE,MADuB;AAE/BC,MAAAA,OAAO,EAAEd,SAAS,CAACC,IAAD,CAFa;AAG/Bc,MAAAA,IAAI,EAAEZ,IAAI,CAACC,SAAL,CAAeH,IAAf;AAHyB,KAArB,CAAL,CAKNe,IALM,CAKDC,CAAC,IAAI;AACT,aAAOA,CAAC,CAACC,IAAF,EAAP;AACD,KAPM,CAAP;AAQD;;AAEDS,EAAAA,cAAc,GAAG;AACf,WAAOxB,IAAI,CAACmB,KAAL,CAAWb,YAAY,CAACc,OAAb,CAAqB,MAArB,CAAX,CAAP;AAAgD;AACjD;;AAnCe;;AAsClB,eAAe,IAAIb,WAAJ,EAAf","sourcesContent":["const API_URL = `${process.env.NEXT_PUBLIC_API_ROOT_URL}api/auth/`;\n\n\nconst myHeaders = data => {\n  return new Headers({ \n    'content-type': 'application/json',\n    'content-length': data ? JSON.stringify(data).length.toString() : 0 \n  })\n}\n\nconsole.log('localStorage', localStorage)\n\nclass AuthService {\n  login(data) {\n    return fetch(API_URL + \"login\", {\n      method: \"POST\",\n      headers: myHeaders(data),\n      body: JSON.stringify(data)\n    })\n    .then(r => r.json())\n    .then(response => {\n      if (response.data && response.data.token) {\n        localStorage.setItem(\"user\", JSON.stringify(response.data));\n      }\n      console.log('localStorage.l23', JSON.parse(localStorage.getItem('user')))\n\n      return response.data;\n    });\n  }\n\n  logout() {\n    localStorage.removeItem(\"user\");\n  }\n\n  register(data) {\n    return fetch(API_URL + \"signup\", {\n      method: \"POST\",\n      headers: myHeaders(data),\n      body: JSON.stringify(data)\n    })\n    .then(r => {\n      return r.json()\n    })\n  }\n\n  getCurrentUser() {\n    return JSON.parse(localStorage.getItem('user'));;\n  }\n}\n\nexport default new AuthService();"]},"metadata":{},"sourceType":"module"}